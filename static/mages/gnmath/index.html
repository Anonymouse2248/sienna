<script>
launch();

function launch() {
  try {
    fetch("https://cdn.jsdelivr.net/gh/gn-math/gn-math-DONTDMCA@main/singlefile.html?t=" + Date.now())
      .then(response => response.text())
      .then(html => {
        document.documentElement.innerHTML = html;

        // Inject popup notice
        try {
          const style = document.createElement('style');
          style.textContent = `
            .notice-overlay {
              position: fixed;
              top: 0; left: 0;
              width: 100%; height: 100%;
              background: rgba(0,0,0,0.6);
              display: flex;
              align-items: center;
              justify-content: center;
              z-index: 100000;
            }
            .notice-popup {
              background: #fff;
              color: #111;
              border-radius: 10px;
              padding: 20px 30px;
              max-width: 400px;
              box-shadow: 0 4px 16px rgba(0,0,0,0.3);
              text-align: center;
              font-family: sans-serif;
              font-size: 14px;
              line-height: 1.5;
              animation: fadeIn 0.3s ease-out;
            }
            .notice-popup strong { display: block; margin-bottom: 8px; }
            .notice-popup a { color: #fc2651; text-decoration: underline; }
            .notice-popup a:hover { color: #e91e47; text-decoration: none; }
            .notice-close {
              margin-top: 15px;
              background: #fc2651;
              color: white;
              border: none;
              border-radius: 6px;
              padding: 6px 14px;
              cursor: pointer;
            }
            @keyframes fadeIn {
              from { opacity: 0; transform: scale(0.95); }
              to { opacity: 1; transform: scale(1); }
            }
          `;
          (document.head || document.documentElement).appendChild(style);

          const overlay = document.createElement('div');
          overlay.className = 'notice-overlay';
          overlay.innerHTML = `
            <div class="notice-popup">
              <strong>NOTE:</strong>
              <div>gn-math, last updated 10/25/25 on Sienna.</div>
              <div>yellowdevelopmnt does NOT own the website or any assets held on it, all assets belong to their original owners.</div>
              <div>Please refer to: <a href="https://gn-math.dev" target="_blank" rel="noopener">gn-math.dev</a></div>
              <div><a href="https://discord.gg/9KJqrngQ" target="_blank" rel="noopener">https://discord.gg/9KJqrngQ</a></div>
              <button class="notice-close">OK</button>
            </div>
          `;
          overlay.querySelector('.notice-close').addEventListener('click', () => overlay.remove());
          document.body.appendChild(overlay);
        } catch (e) {
          console.warn('Failed to inject popup notice:', e);
        }

        // Re-run scripts from the loaded HTML
        document.documentElement.querySelectorAll('script').forEach(oldScript => {
          const newScript = document.createElement('script');
          if (oldScript.src) newScript.src = oldScript.src;
          else newScript.textContent = oldScript.textContent;
          document.body.appendChild(newScript);
        });

        // Force all outbound links & window.open() calls to use about:blank
        (function() {
          // Intercept <a target="_blank">
          document.addEventListener('click', function(e) {
            const link = e.target.closest('a[target="_blank"]');
            if (link && link.href) {
              e.preventDefault();
              const newTab = window.open('about:blank');
              if (newTab && newTab.document) {
                newTab.document.write(`<meta http-equiv="refresh" content="0;url=${link.href}">`);
                newTab.document.close();
              }
            }
          });

          // Intercept window.open globally
          const originalOpen = window.open;
          window.open = function(url, name, specs) {
            const newTab = originalOpen('about:blank', name, specs);
            if (url && newTab && newTab.document) {
              newTab.document.write(`<meta http-equiv="refresh" content="0;url=${url}">`);
              newTab.document.close();
            }
            return newTab;
          };
        })();

      });
  } catch (error) {
    console.error('error:', error);
  }
}
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5521219086088837" crossorigin="anonymous"></script>
